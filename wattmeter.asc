Version 4
SHEET 1 4420 1752
WIRE 192 -400 160 -400
WIRE 320 -400 272 -400
WIRE 1488 -352 1456 -352
WIRE 1600 -352 1568 -352
WIRE 1760 -336 1728 -336
WIRE 1872 -336 1840 -336
WIRE 2160 -320 2128 -320
WIRE 2272 -320 2240 -320
WIRE 560 -304 544 -304
WIRE 704 -304 640 -304
WIRE 2512 -304 2480 -304
WIRE 2624 -304 2592 -304
WIRE 160 -288 160 -400
WIRE 160 -288 -224 -288
WIRE 208 -288 160 -288
WIRE 864 -288 848 -288
WIRE 992 -288 944 -288
WIRE 320 -272 320 -400
WIRE 320 -272 272 -272
WIRE 1136 -272 1120 -272
WIRE 1264 -272 1216 -272
WIRE 208 -256 144 -256
WIRE 1456 -256 1456 -352
WIRE 1488 -256 1456 -256
WIRE 1600 -256 1600 -352
WIRE 1600 -256 1552 -256
WIRE 1728 -240 1728 -336
WIRE 1760 -240 1728 -240
WIRE 1872 -240 1872 -336
WIRE 1872 -240 1824 -240
WIRE 320 -224 320 -272
WIRE 400 -224 320 -224
WIRE 544 -224 544 -304
WIRE 544 -224 480 -224
WIRE 144 -176 144 -256
WIRE 144 -176 96 -176
WIRE 544 -176 544 -224
WIRE 576 -176 544 -176
WIRE 96 -160 96 -176
WIRE 704 -160 704 -304
WIRE 704 -160 640 -160
WIRE 752 -160 704 -160
WIRE 848 -160 848 -288
WIRE 848 -160 832 -160
WIRE 880 -160 848 -160
WIRE 576 -144 528 -144
WIRE 992 -144 992 -288
WIRE 992 -144 944 -144
WIRE 1024 -144 992 -144
WIRE 1120 -144 1120 -272
WIRE 1120 -144 1104 -144
WIRE 1152 -144 1120 -144
WIRE 880 -128 848 -128
WIRE 1264 -128 1264 -272
WIRE 1264 -128 1216 -128
WIRE 1360 -128 1264 -128
WIRE 1456 -128 1456 -256
WIRE 1456 -128 1440 -128
WIRE 1488 -128 1456 -128
WIRE 400 -112 304 -112
WIRE 528 -112 528 -144
WIRE 528 -112 480 -112
WIRE 1152 -112 1120 -112
WIRE 1600 -112 1600 -256
WIRE 1600 -112 1552 -112
WIRE 1632 -112 1600 -112
WIRE 1728 -112 1728 -240
WIRE 1728 -112 1712 -112
WIRE 1760 -112 1728 -112
WIRE 1488 -96 1456 -96
WIRE 1872 -96 1872 -240
WIRE 1872 -96 1824 -96
WIRE 2032 -96 1872 -96
WIRE 2128 -96 2128 -320
WIRE 2128 -96 2112 -96
WIRE 2160 -96 2128 -96
WIRE 144 -80 144 -176
WIRE 208 -80 144 -80
WIRE 848 -80 848 -128
WIRE 1760 -80 1728 -80
WIRE 2272 -80 2272 -320
WIRE 2272 -80 2224 -80
WIRE 2288 -80 2272 -80
WIRE 2480 -80 2480 -304
WIRE 2480 -80 2368 -80
WIRE 2512 -80 2480 -80
WIRE 304 -64 304 -112
WIRE 304 -64 272 -64
WIRE 1120 -64 1120 -112
WIRE 2160 -64 2144 -64
WIRE 2624 -64 2624 -304
WIRE 2624 -64 2576 -64
WIRE 2704 -64 2624 -64
WIRE 2864 -64 2784 -64
WIRE 192 -48 0 -48
WIRE 208 -48 192 -48
WIRE 2512 -48 2496 -48
WIRE 528 -32 528 -112
WIRE 2144 -32 2144 -64
WIRE 2496 -16 2496 -48
WIRE 192 64 192 -48
WIRE 304 64 304 -64
WIRE 304 64 272 64
WIRE -224 144 -224 -288
WIRE 0 144 0 -48
WIRE 2640 192 2640 112
WIRE 2880 192 2640 192
WIRE 3056 208 2944 208
WIRE -432 224 -464 224
WIRE -416 224 -432 224
WIRE -336 224 -368 224
WIRE -272 224 -336 224
WIRE 112 224 48 224
WIRE 2864 224 2864 -64
WIRE 2880 224 2864 224
WIRE 112 256 112 224
WIRE -336 272 -336 224
WIRE -224 304 -224 240
WIRE -112 304 -224 304
WIRE 0 304 0 240
WIRE 0 304 -112 304
WIRE 4240 304 3824 304
WIRE 4336 304 4304 304
WIRE 1264 320 1264 -128
WIRE 2640 320 2640 272
WIRE 2800 320 2640 320
WIRE 4240 336 3792 336
WIRE 4368 336 4304 336
WIRE -336 352 -336 336
WIRE 2640 352 2640 320
WIRE 2800 352 2800 320
WIRE 2880 352 2800 352
WIRE 3056 368 2944 368
WIRE 3648 368 3056 368
WIRE 2864 384 2864 224
WIRE 2880 384 2864 384
WIRE 4256 384 4256 352
WIRE 2640 496 2640 432
WIRE 2800 496 2640 496
WIRE 3648 496 3648 368
WIRE 3824 496 3824 304
WIRE 3824 496 3648 496
WIRE 3952 496 3824 496
WIRE 2640 528 2640 496
WIRE 2800 528 2800 496
WIRE 2880 528 2800 528
WIRE 3056 544 2944 544
WIRE 3200 544 3056 544
WIRE 3952 544 3952 496
WIRE 4240 544 3952 544
WIRE 4352 544 4304 544
WIRE 2864 560 2864 384
WIRE 2880 560 2864 560
WIRE 4240 576 4176 576
WIRE 4368 576 4304 576
WIRE 4016 624 3104 624
WIRE 4176 624 4176 576
WIRE 4176 624 4080 624
WIRE 4256 640 4256 592
WIRE 2640 656 2640 608
WIRE 2816 656 2640 656
WIRE 3200 656 3200 544
WIRE 3792 656 3792 336
WIRE 3792 656 3200 656
WIRE 3808 656 3792 656
WIRE 4016 656 3872 656
WIRE 2640 688 2640 656
WIRE 2816 688 2816 656
WIRE 2880 688 2816 688
WIRE 4032 688 4032 672
WIRE 3056 704 2944 704
WIRE 3104 704 3104 624
WIRE 3104 704 3056 704
WIRE 2864 720 2864 560
WIRE 2880 720 2864 720
WIRE 192 752 48 752
WIRE -784 768 -976 768
WIRE -496 768 -784 768
WIRE 2640 784 2640 768
WIRE 2816 784 2640 784
WIRE -176 800 -224 800
WIRE -48 800 -176 800
WIRE -352 816 -432 816
WIRE -48 816 -48 800
WIRE -224 832 -224 800
WIRE -224 832 -288 832
WIRE 48 832 32 832
WIRE 2816 832 2816 784
WIRE 2880 832 2816 832
WIRE -496 848 -496 768
WIRE -352 848 -496 848
WIRE 3056 848 2944 848
WIRE 2864 864 2864 720
WIRE 2880 864 2864 864
WIRE 2640 880 2640 784
WIRE -976 896 -976 768
WIRE -784 896 -784 768
WIRE -432 912 -432 816
WIRE -176 912 -176 880
WIRE -176 912 -432 912
WIRE -48 912 -48 896
WIRE 32 912 32 832
WIRE 32 912 -48 912
WIRE 48 912 32 912
WIRE -176 928 -176 912
WIRE 192 928 192 752
WIRE 192 928 112 928
WIRE 0 944 -64 944
WIRE 48 944 0 944
WIRE -784 976 -784 960
WIRE -240 976 -384 976
WIRE -240 1008 -240 976
WIRE -176 1008 -240 1008
WIRE 0 1008 0 944
WIRE -384 1024 -384 976
WIRE -352 1024 -384 1024
WIRE -224 1040 -288 1040
WIRE -352 1056 -496 1056
WIRE -176 1056 -176 1008
WIRE -976 1104 -976 976
WIRE -944 1104 -976 1104
WIRE -928 1104 -944 1104
WIRE -832 1104 -848 1104
WIRE -784 1104 -784 976
WIRE -784 1104 -832 1104
WIRE -496 1104 -496 1056
WIRE -496 1104 -784 1104
WIRE -224 1136 -224 1040
WIRE -176 1136 -224 1136
WIRE -64 1136 -64 1024
WIRE -64 1136 -176 1136
WIRE -144 1312 -288 1312
WIRE -512 1360 -560 1360
WIRE -384 1360 -512 1360
WIRE -688 1376 -768 1376
WIRE -384 1376 -384 1360
WIRE -560 1392 -560 1360
WIRE -560 1392 -624 1392
WIRE -288 1392 -304 1392
WIRE -832 1408 -832 1104
WIRE -688 1408 -832 1408
WIRE -768 1472 -768 1376
WIRE -512 1472 -512 1440
WIRE -512 1472 -768 1472
WIRE -384 1472 -384 1456
WIRE -304 1472 -304 1392
WIRE -304 1472 -384 1472
WIRE -288 1472 -304 1472
WIRE -512 1488 -512 1472
WIRE -144 1488 -144 1312
WIRE -144 1488 -224 1488
WIRE -80 1488 -144 1488
WIRE -336 1504 -400 1504
WIRE -288 1504 -336 1504
WIRE -576 1536 -720 1536
WIRE -576 1568 -576 1536
WIRE -512 1568 -576 1568
WIRE -336 1568 -336 1504
WIRE -720 1584 -720 1536
WIRE -688 1584 -720 1584
WIRE -560 1600 -624 1600
WIRE -944 1616 -944 1104
WIRE -944 1616 -960 1616
WIRE -688 1616 -944 1616
WIRE -512 1616 -512 1568
WIRE -560 1696 -560 1600
WIRE -512 1696 -560 1696
WIRE -400 1696 -400 1584
WIRE -400 1696 -512 1696
FLAG -528 -160 +V
FLAG 240 -304 +V
FLAG -384 -160 -V
FLAG 240 -240 -V
FLAG -528 -80 0
FLAG -384 -80 0
FLAG 240 -96 +V
FLAG 240 -32 -V
FLAG 608 -192 +V
FLAG 608 -128 -V
FLAG 96 -160 0
FLAG 528 48 0
FLAG 112 336 0
FLAG -336 432 0
FLAG 704 -160 multiplied
FLAG 912 -176 +V
FLAG 912 -112 -V
FLAG 848 -80 0
FLAG 1184 -160 +V
FLAG 1184 -96 -V
FLAG 1120 -64 0
FLAG 1520 -144 +V
FLAG 1520 -80 -V
FLAG 1456 -96 0
FLAG 1792 -128 +V
FLAG 1792 -64 -V
FLAG 1728 -80 0
FLAG 2192 -112 +V
FLAG 2192 -48 -V
FLAG 2144 -32 0
FLAG 1264 320 Pout
IOPIN 1264 320 Out
FLAG 2544 -96 +V
FLAG 2544 -32 -V
FLAG 2496 -16 0
FLAG 2640 32 0
FLAG 3472 -384 0
FLAG 3648 -384 0
FLAG 3472 -464 +5
FLAG 2912 176 +5
FLAG 3648 -464 -5
FLAG 2912 240 -5
FLAG 2912 336 +5
FLAG 2912 400 -5
FLAG 2912 512 +5
FLAG 2912 576 -5
FLAG 2912 672 +5
FLAG 2912 736 -5
FLAG 2912 816 +5
FLAG 2912 880 -5
FLAG 3056 208 4
FLAG 3056 544 2
FLAG 3056 704 1
FLAG 3056 848 zero
FLAG 3056 368 3
FLAG -976 1104 0
FLAG -336 1648 0
FLAG -656 1360 +V
FLAG -656 1568 +V
FLAG -256 1456 +V
FLAG -656 1424 -V
FLAG -656 1632 -V
FLAG -256 1520 -V
FLAG 192 928 ip_voltage
IOPIN 192 928 Out
FLAG -80 1488 ip_current
IOPIN -80 1488 Out
FLAG -112 304 ip_current
IOPIN -112 304 In
FLAG -464 224 ip_voltage
IOPIN -464 224 In
FLAG 0 1088 0
FLAG -320 800 +V
FLAG -320 1008 +V
FLAG 80 896 +V
FLAG -320 864 -V
FLAG -320 1072 -V
FLAG 80 960 -V
FLAG 2640 880 0
FLAG 4256 384 0
FLAG 4256 640 0
FLAG 4368 336 +5
FLAG 4368 576 +5
FLAG 4080 656 +5
FLAG 4032 688 0
FLAG 2864 -64 Pavg
IOPIN 2864 -64 Out
SYMBOL OpAmps\\UniversalOpAmp2 240 -272 R0
SYMATTR InstName U1
SYMBOL voltage -528 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName +Vs
SYMATTR Value 12
SYMBOL voltage -384 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName -Vs
SYMATTR Value -12
SYMBOL OpAmps\\UniversalOpAmp2 608 -160 R0
SYMATTR InstName U3
SYMBOL res 656 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 496 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1K
SYMBOL res 496 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1K
SYMBOL res 288 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1K
SYMBOL res 288 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1K
SYMBOL res 544 64 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL voltage -336 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL voltage 112 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 1
SYMBOL nmos -272 144 R0
SYMATTR InstName M3
SYMBOL OpAmps\\UniversalOpAmp2 912 -144 R0
SYMATTR InstName U4
SYMBOL res 960 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res 848 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2k
SYMBOL OpAmps\\UniversalOpAmp2 1184 -128 R0
SYMATTR InstName U5
SYMBOL res 1232 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 1120 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp2 1520 -112 R0
SYMATTR InstName U7
SYMBOL res 1456 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL cap 1552 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL res 1584 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp2 240 -64 R0
SYMATTR InstName U2
SYMBOL nmos 48 144 M0
SYMATTR InstName M1
SYMBOL OpAmps\\UniversalOpAmp2 1792 -96 R0
SYMATTR InstName U8
SYMBOL res 1728 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 10k
SYMBOL cap 1824 -256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL res 1856 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp2 2192 -80 R0
SYMATTR InstName U10
SYMBOL res 2128 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 2k
SYMBOL res 2256 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp2 2544 -64 R0
SYMATTR InstName U9
SYMBOL res 2384 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL res 2608 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 1k
SYMBOL voltage 2640 128 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 4V
SYMBOL res 2624 176 R0
SYMATTR InstName R25
SYMATTR Value 1k
SYMBOL res 2624 336 R0
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL res 2624 512 R0
SYMATTR InstName R27
SYMATTR Value 1k
SYMBOL res 2624 672 R0
SYMATTR InstName R28
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp2 2912 208 R0
SYMATTR InstName U12
SYMBOL voltage 3472 -480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL voltage 3648 -480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value -5
SYMBOL OpAmps\\UniversalOpAmp2 2912 368 R0
SYMATTR InstName U11
SYMBOL OpAmps\\UniversalOpAmp2 2912 544 R0
SYMATTR InstName U13
SYMBOL OpAmps\\UniversalOpAmp2 2912 704 R0
SYMATTR InstName U14
SYMBOL OpAmps\\UniversalOpAmp2 2912 848 R0
SYMATTR InstName U15
SYMBOL voltage -976 880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value SINE(0 12V 50)
SYMBOL res -528 1344 R0
SYMATTR InstName R30
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp2 -656 1392 R0
SYMATTR InstName U16
SYMBOL OpAmps\\UniversalOpAmp2 -656 1600 R0
SYMATTR InstName U17
SYMBOL OpAmps\\UniversalOpAmp2 -256 1488 R0
SYMATTR InstName U18
SYMBOL res -528 1472 R0
SYMATTR InstName R31
SYMATTR Value 1k
SYMBOL res -528 1600 R0
SYMATTR InstName R32
SYMATTR Value 1k
SYMBOL res -416 1488 R0
SYMATTR InstName R33
SYMATTR Value 9k
SYMBOL res -352 1552 R0
SYMATTR InstName R34
SYMATTR Value 100k
SYMBOL res -400 1360 R0
SYMATTR InstName R35
SYMATTR Value 9k
SYMBOL res -304 1296 R0
SYMATTR InstName R36
SYMATTR Value 100k
SYMBOL res -832 1088 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 1
SYMBOL cap -368 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL diode -320 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL res -192 784 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp2 -320 832 R0
SYMATTR InstName U6
SYMBOL OpAmps\\UniversalOpAmp2 -320 1040 R0
SYMATTR InstName U19
SYMBOL OpAmps\\UniversalOpAmp2 80 928 R0
SYMATTR InstName U20
SYMBOL res -192 912 R0
SYMATTR InstName R12
SYMATTR Value 300k
SYMBOL res -192 1040 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res -80 928 R0
SYMATTR InstName R14
SYMATTR Value 300k
SYMBOL res -16 992 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res -64 800 R0
SYMATTR InstName R16
SYMATTR Value 300k
SYMBOL res 32 736 R0
SYMATTR InstName R42
SYMATTR Value 10k
SYMBOL res 2800 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 1k
SYMBOL Digital\\or 4272 496 R0
SYMATTR InstName A1
SYMBOL Digital\\and 4048 576 R0
SYMATTR InstName A2
SYMBOL Digital\\inv 3808 592 R0
SYMATTR InstName A3
SYMBOL Digital\\or 4272 256 R0
SYMATTR InstName A4
SYMBOL res -800 880 R0
SYMATTR InstName R29
SYMATTR Value 2k
TEXT 408 232 Left 2 ;.dc V2 -1 1 0.1 V1 list 0.1 0.1
TEXT 416 312 Left 2 ;.dc V1 -0.4 0.4 0.001 V2 list 0.4
TEXT 424 424 Left 2 !.tran 0 10 0 0.001
